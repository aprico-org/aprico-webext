(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){const aprico=(()=>{"use strict";const scrypt=typeof module!=="undefined"&&module.exports?require("scrypt-async"):window.scrypt;if(typeof scrypt!=="function")throw new Error("Aprico requires scrypt-async-js library.");const VERSION="1.0.0";const SCRYPT_COST={N:Math.pow(2,14),r:8,p:1,dkLen:32,encoding:"hex"};const SCRYPT_COST_FAST={N:Math.pow(2,5),r:8,p:1,dkLen:32,encoding:"hex"};const ALPHABET={letters:"abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",numbers:"123456789",symbols:"_!$-+"};let options={length:20,letters:true,numbers:true,symbols:true,variant:false};const _convert=(src,srctable,desttable)=>{const srclen=srctable.length;const destlen=desttable.length;let val=0;for(let i=0,numlen=src.length;i<numlen;i++){val=val*srclen+srctable.indexOf(src.charAt(i))}if(val<0){return 0}let r=val%destlen;let res=desttable.charAt(r);let q=Math.floor(val/destlen);while(q){r=q%destlen;q=Math.floor(q/destlen);res=desttable.charAt(r)+res}return res};const _hashToAlphabet=hash=>{let alphabet="";if(options.symbols)alphabet+=ALPHABET.symbols;if(options.numbers)alphabet+=ALPHABET.numbers;if(options.letters)alphabet+=ALPHABET.letters;let result="";let split=hash.match(/(.{1,7})/g);for(let i=0,l=split.length-1;i<l;i++){if(options.length>9){scrypt(hash,split[l-i-1],SCRYPT_COST_FAST,function(hash){split=hash.match(/(.{1,7})/g)})}result+=_convert(split[i],"0123456789abcdef",alphabet)}if(result.length<=options.length)return".";let offset=(result.length-options.length)/2|0;result=result.substring(offset,offset+options.length);let firstChar=result.charAt(0);if(options.letters&&options.length>6&&!/[a-zA-Z]/.test(firstChar)){result=result.replace(firstChar,_convert(firstChar,ALPHABET.symbols+ALPHABET.numbers,ALPHABET.letters))}return result};const _checkAndIterate=results=>{let success=false;while(!success){success=true;if(options.letters&&(!/[a-z]/.test(results.pass)||!/[A-Z]/.test(results.pass)||/([A-z])\1{2}/.test(results.pass)))success=false;if(success&&options.numbers&&(!/[\d]/.test(results.pass)||/([\d])\1{2}/.test(results.pass)))success=false;if(success&&options.symbols&&(!/[!$\-+_]/.test(results.pass)||/([!$\-+_])\1{2}/.test(results.pass)))success=false;if(!success){scrypt(results.hash,results.pass,SCRYPT_COST_FAST,function(hash){results.hash=hash;results.pass=_hashToAlphabet(hash)})}}return results};const _checkOptions=user_options=>{for(let opt in options)if(user_options.hasOwnProperty(opt))options[opt]=user_options[opt];options.letters=!!options.letters;options.numbers=!!options.numbers;options.symbols=!!options.symbols;if(!options.letters&&!options.symbols&&!options.numbers)throw new Error("At least one character set (letters, numbers, symbols) must be chosen.");options.length=+options.length;if(typeof options.length!=="number"||options.length<4||options.length>40)throw new Error("Password length must be a number between 4 and 40.")};const getPassword=(password,service,hashId,user_options)=>{if(user_options)_checkOptions(user_options);service=normalizeService(service);let pass=password+"."+service+"."+options.length+ +options.letters+ +options.symbols+ +options.numbers;if(options.variant&&typeof options.variant==="string")pass+="."+options.variant;let results={};scrypt(pass,hashId,SCRYPT_COST,function(hash){results.hash=hash;results.pass=_hashToAlphabet(hash);results=_checkAndIterate(results)});return results};const getHashId=id=>{let output="";let salt=Math.pow(id.length,(id.match(/[aeiou]/gi)||[0,0,0]).length)+"";salt=_convert(salt,"0123456789.e+Infity",ALPHABET.numbers+ALPHABET.symbols+ALPHABET.letters)+"";scrypt(id,salt,SCRYPT_COST,function(hash){output=hash});return output};const normalizeService=service=>{service=service.trim().toLowerCase();if(service.substring(0,4)=="http"){service=service.substring(service.indexOf("://")+3,service.length)}if(service.indexOf(".")!==-1&&service.indexOf("/")!==-1){service=service.split("/");service=service[0]}return service};return{getPassword:getPassword,getHashId:getHashId,normalizeService:normalizeService,version:VERSION}})();if(typeof module!=="undefined"&&module.exports){module.exports=aprico}else{window.aprico=aprico}},{"scrypt-async":9}],2:[function(require,module,exports){"use strict";const VERSION="0.1.0";const aprico=require("aprico-gen");const VERSION_TREE={"aprico-gen":aprico.version,"aprico-ui":VERSION};const sha256=function a(b){function c(a,b){return a>>>b|a<<32-b}for(var d,e,f=Math.pow,g=f(2,32),h="length",i="",j=[],k=8*b[h],l=a.h=a.h||[],m=a.k=a.k||[],n=m[h],o={},p=2;64>n;p++)if(!o[p]){for(d=0;313>d;d+=p)o[d]=p;l[n]=f(p,.5)*g|0,m[n++]=f(p,1/3)*g|0}for(b+="Â€";b[h]%64-56;)b+="\0";for(d=0;d<b[h];d++){if(e=b.charCodeAt(d),e>>8)return;j[d>>2]|=e<<(3-d)%4*8}for(j[j[h]]=k/g|0,j[j[h]]=k,e=0;e<j[h];){var q=j.slice(e,e+=16),r=l;for(l=l.slice(0,8),d=0;64>d;d++){var s=q[d-15],t=q[d-2],u=l[0],v=l[4],w=l[7]+(c(v,6)^c(v,11)^c(v,25))+(v&l[5]^~v&l[6])+m[d]+(q[d]=16>d?q[d]:q[d-16]+(c(s,7)^c(s,18)^s>>>3)+q[d-7]+(c(t,17)^c(t,19)^t>>>10)|0),x=(c(u,2)^c(u,13)^c(u,22))+(u&l[1]^u&l[2]^l[1]&l[2]);l=[w+x|0].concat(l),l[4]=l[4]+w|0}for(d=0;8>d;d++)l[d]=l[d]+r[d]|0}for(d=0;8>d;d++)for(e=3;e+1;e--){var y=l[d]>>8*e&255;i+=(16>y?0:"")+y.toString(16)}return i};const Identicon=require("identicon.js");const DEFAULT_TEMPLATES=require("./templates.js");const utils=require("./utils.js");const isWebExt=typeof browser!=="undefined"&&browser.runtime&&browser.runtime.id||typeof chrome!=="undefined"&&chrome.runtime&&chrome.runtime.id;if(isWebExt&&typeof chrome==="undefined")window.chrome=window.browser;const IDENTICON_OPTIONS={foreground:[239,61,51,255],background:[255,255,255,255],margin:.24,size:41,format:"svg"};let _root;let _hashId;let template;const hashIdKey="hashId_"+VERSION_TREE["aprico-gen"].replace(/\./g,"_");function setHashId(hashId){_hashId=hashId;if(isWebExt){chrome.storage.local.set({hashId:hashId},renderMain)}else{localStorage.setItem("hashId",hashId);renderMain()}}function resetHashId(){_hashId=false;if(isWebExt){chrome.storage.local.set({hashId:""},renderLogin)}else{localStorage.setItem("hashId","");renderLogin()}}function onHashId(result){if(result&&result.hashId){_hashId=result.hashId;renderMain()}else{_hashId=false;renderLogin()}}function bootstrap(element,user_template){_root=document.querySelector(element);if(!_root)throw new Error("Root element is undefined.");template=user_template?user_template:DEFAULT_TEMPLATES;if(isWebExt){_root.classList.add("aprico-webext");chrome.storage.local.get("hashId",onHashId)}else{_root.classList.add("aprico-browser");let hashId=localStorage.getItem("hashId");onHashId({hashId:hashId})}}function renderLogin(){let node=utils.stringToDom(template.login);if(_root.firstChild)_root.removeChild(_root.firstChild);_root.appendChild(node);setupLogin()}function renderMain(){let node=utils.stringToDom(template.main);if(_root.firstChild)_root.removeChild(_root.firstChild);_root.appendChild(node);setupMain()}function setupLogin(){let $hashId=utils.getId("ap-hashid");let $login=utils.getId("ap-trigger-login");$hashId.focus();$login.addEventListener("click",function(e){e.preventDefault();if($hashId.value){_hashId=aprico.getHashId($hashId.value);setHashId(_hashId)}else{$hashId.focus()}})}function setupMain(){let $pass=utils.getId("ap-pass");let $service=utils.getId("ap-service");let $result=utils.getId("ap-result");let $trigger=utils.getId("ap-trigger-gen");let $variant=utils.getId("ap-variant");let $letters=utils.getId("ap-letters");let $numbers=utils.getId("ap-numbers");let $symbols=utils.getId("ap-symbols");let $length=utils.getId("ap-length");let $triggerExtra=utils.getId("ap-trigger-extra");let $label=utils.getId("a-pass-label");let $triggerCopy=utils.getId("ap-copy");let $triggerShow=utils.getId("ap-show");let $extraDiv=utils.getId("aprico-extra");let $resultDiv=utils.getId("aprico-result");let $aboutDiv=utils.getId("aprico-about");if(isWebExt){chrome.tabs.query({active:true,currentWindow:true},function(tabs){if(tabs[0].url.indexOf(".")>0){$service.value=aprico.normalizeService(tabs[0].url);$pass.focus()}else{$service.focus()}})}else{$service.focus()}$service.addEventListener("blur",function(e){this.value=aprico.normalizeService(this.value)});$pass.addEventListener("input",function(e){if(this.value.length){let value64=btoa(encodeURIComponent(this.value).replace(/%([0-9A-F]{2})/g,function(match,p1){return String.fromCharCode(parseInt(p1,16))}));let data=new Identicon(sha256(_hashId+value64),IDENTICON_OPTIONS).toString();$pass.style.backgroundImage="url(data:image/svg+xml;base64,"+data+")"}else{$pass.style.backgroundImage=""}});$pass.addEventListener("keyup",function(e){if(e.key==="Enter")generate()});$triggerExtra.addEventListener("click",function(e){e.preventDefault();if(this.classList.contains("bg-gray-1")){this.classList.remove("bg-gray-1");show($aboutDiv)}else{this.classList.add("bg-gray-1");show($extraDiv)}});$result.addEventListener("focus",function(){this.type="text"});$result.addEventListener("blur",function(){this.type="password"});$trigger.addEventListener("click",generate);async function generate(e){if(!$service.value){$service.focus();return false}if(!$pass.value){$pass.focus();return false}let timerId,results,copy;let step1=await new Promise(function(resolve){$label.classList.remove("icon","icon-done","icon-alldone");$triggerCopy.classList.add("hidden");$triggerShow.classList.add("hidden");$result.classList.remove("border-red");$triggerExtra.classList.remove("bg-gray-1");show($resultDiv);timerId=setInterval(function(){$label.textContent+="."},50);$label.classList.add("red");$label.textContent="Generating.";$trigger.disabled=true;$triggerExtra.disabled=true;$result.value="";return setTimeout(resolve,100)});let step2=await new Promise(function(resolve){let time=(new Date).getTime();results=aprico.getPassword($pass.value,$service.value,_hashId,{length:+$length.value,letters:+$letters.checked,numbers:+$numbers.checked,symbols:+$symbols.checked,variant:$variant.value});$result.value=results.pass;results=false;copy=utils.copyToClipboard($result);return setTimeout(resolve,100)});let step3=await new Promise(function(resolve){$result.classList.add("border-red");$label.classList.remove("red");clearInterval(timerId);if(copy){$label.classList.add("icon","icon-alldone");$label.textContent="Password copied to clipboard."}else{$label.classList.add("icon","icon-done");$label.textContent="Password is ready.";$triggerCopy.classList.remove("hidden")}$triggerShow.classList.remove("hidden");$trigger.disabled=false;$triggerExtra.disabled=false;return resolve()})}$triggerCopy.addEventListener("click",function(e){let copy=utils.copyToClipboard($result);if(copy)$label.textContent="Password copied to clipboard."});let $reset=utils.getId("ap-delete-hash");$reset.addEventListener("click",resetHashId);$triggerShow.addEventListener("click",function(e){$result.focus()});function show(section){$resultDiv.hidden=true;$aboutDiv.hidden=true;$extraDiv.hidden=true;section.hidden=false}let formEls=document.querySelectorAll("input");Array.from(formEls).forEach(function(el){el.addEventListener("input",function(){if($resultDiv.hidden!=true)show($aboutDiv)})});let checkboxes=document.querySelectorAll(".switch-toggle");[...checkboxes].forEach(checkbox=>checkbox.addEventListener("change",checkboxOnChange));function checkboxOnChange(){let checkedOne=Array.prototype.slice.call(checkboxes).some(x=>x.checked);if(!checkedOne)this.checked=true}$length.addEventListener("blur",function(){if(+this.value==0)this.value=20;else if(+this.value<4)this.value=4;else if(+this.value>40)this.value=40});let $aboutLink=utils.getId("ap-link-about");$aboutLink.addEventListener("click",function(){window.open("https://aprico.org/")})}module.exports=bootstrap;module.exports.version=VERSION_TREE},{"./templates.js":3,"./utils.js":4,"aprico-gen":1,"identicon.js":6}],3:[function(require,module,exports){const templates={login:`\n  <div id="aprico-login" class="p2 bg-white">\n\t<div class="mb2">\n      <label class="label">ID</label>\n      <input type="text" id="ap-hashid" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">\n  \t</div>\n  \t<div class="mb2">\n  \t\t<p class="h6">Please choose an ID: it can be your e-mail address, your nickname or a longer passphrase.</p>\n\t\t<p class="h6">It will be asked only once, but please, <strong>make sure to remeber it</strong>, there is no way to recover your ID.</p>\n  \t</div>\n  \t<div class="-mb2">\n      <button id="ap-trigger-login" class="btn btn-primary h6 caps white">Start using Aprico</button>\n  \t</div>\n    </div>\n  \t`,main:`\n  <div id="aprico-main">\n  <div class="p2 bg-white">\n  \t<div class="mb2">\n      <label class="label">Service</label>\n      <input type="text" id="ap-service" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">\n  \t</div>\n  \t<div class="mb2">\n      <label class="label">Master Password</label>\n      <input type="password" id="ap-pass" class="bg-identicon">\n  \t</div>\n  \t<div class="-mb2">\n    \t<div class="flex">\n      \t<button id="ap-trigger-gen" class="btn btn-primary white h6 caps" style="margin-left:1px">Get Password</button>\n      \t<span class="flex-auto"></span>\n      \t<button id="ap-trigger-extra" class="btn h6 caps right icon icon-opts px0 border-gray rounded"><span style="opacity:0">More</span></button>\n    \t</div>\n  \t</div>\n  </div>\n\n  <div id="aprico-extra" class="bg-gray-1 p2" hidden>\n    <div class="flex justify-between mb2">\n        <div class="-mb2 col-3 ">\n            <label class="label">Length</label>\n            <input type="number" min="4" max="40" value="20" id="ap-length">\n        </div>\n        <div class="-mb2 col-9 flex-auto pl2">\n            <label class="label">Alphabet</label>\n            <ul class="list-reset flex justify-between center">\n                <li>\n                    <input type="checkbox" checked id="ap-letters" class="switch-toggle switch-toggle-round">\n                    <label for="ap-letters"><span class="mt2 block">Letters</span></label>\n                </li>\n                <li>\n                    <input type="checkbox" checked id="ap-numbers" class="switch-toggle switch-toggle-round">\n                    <label for="ap-numbers"><span class="mt2 block">Numbers</span></label>\n                </li>\n                <li>\n                    <input type="checkbox" checked id="ap-symbols" class="switch-toggle switch-toggle-round">\n                    <label for="ap-symbols"><span class="mt2 block">Symbols</span></label>\n                </li>\n            </ul>\n        </div>\n    </div>\n    <div class="">\n        <div class="-mb2">\n            <label class="label">Variant</label>\n            <input type="text" id="ap-variant">\n        </div>\n    </div>\n  </div>\n\n  <div id="aprico-result" class="-bg-black bg-gray-1 -white p2" hidden>\n  <div class="mb2">\n      <label class="label bold -white mb2" id="a-pass-label">Password</label>\n      <input type="password" id="ap-result" class="monospace" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" readonly="true">\n  </div>\n  <div class="flex">\n  <button class="btn btn-small -white h6 px0 hidden mr2 icon icon-view weight-400" id="ap-show">Show</button>\n  <button class="btn btn-small -white h6 px0 hidden icon icon-copy weight-400" id="ap-copy">Copy</button>\n  </div>\n  </div>\n\n  <div id="aprico-about">\n  <div class="flex flex-column bg-gray-1" style="min-height:126px">\n  <div class="flex-auto p2">\n  <p class="h5">Thank you for using <strong>Aprico</strong>.</p>\n  </div>\n  <div class="flex p2">\n  <button id="ap-link-about" class="btn btn-small h6 px0 mr1 icon icon-open weight-400">About</button>\n  <button id="ap-link-online" class="hide btn btn-small h6 px0 icon icon-open">Online Version</button>\n  <span class="flex-auto"></span>\n  <button class="btn btn-small h6 px0 icon icon-logout" id="ap-delete-hash">Change ID</button>\n  </div>  \n  </div>\n  </div>\n</div>\n\t`};module.exports=templates},{}],4:[function(require,module,exports){"use strict";const utils={};utils.getId=function(id){return document.getElementById(id)};utils.stringToDom=function(string){return document.createRange().createContextualFragment(string.trim())};utils.copyToClipboard=function(element){element.type="text";element.select();let success=document.execCommand("copy");element.type="password";element.selectionEnd=element.selectionStart;element.blur();return success};utils.chainOnTransitionEnd=function(callback,_this){let runOnce=function(e){e.target.removeEventListener(e.type,runOnce);if(e.target==_this)callback()};_this.addEventListener("transitionend",runOnce);return this};module.exports=utils},{}],5:[function(require,module,exports){},{}],6:[function(require,module,exports){(function(Buffer){(function(){var PNGlib;if(typeof module!=="undefined"&&typeof module.exports!=="undefined"){PNGlib=require("./pnglib")}else{PNGlib=window.PNGlib}var Identicon=function(hash,options){if(typeof hash!=="string"||hash.length<15){throw"A hash of at least 15 characters is required."}this.defaults={background:[240,240,240,255],margin:.08,size:64,saturation:.7,brightness:.5,format:"png"};this.options=typeof options==="object"?options:this.defaults;if(typeof arguments[1]==="number"){this.options.size=arguments[1]}if(arguments[2]){this.options.margin=arguments[2]}this.hash=hash;this.background=this.options.background||this.defaults.background;this.size=this.options.size||this.defaults.size;this.format=this.options.format||this.defaults.format;this.margin=this.options.margin!==undefined?this.options.margin:this.defaults.margin;var hue=parseInt(this.hash.substr(-7),16)/268435455;var saturation=this.options.saturation||this.defaults.saturation;var brightness=this.options.brightness||this.defaults.brightness;this.foreground=this.options.foreground||this.hsl2rgb(hue,saturation,brightness)};Identicon.prototype={background:null,foreground:null,hash:null,margin:null,size:null,format:null,image:function(){return this.isSvg()?new Svg(this.size,this.foreground,this.background):new PNGlib(this.size,this.size,256)},render:function(){var image=this.image(),size=this.size,baseMargin=Math.floor(size*this.margin),cell=Math.floor((size-baseMargin*2)/5),margin=Math.floor((size-cell*5)/2),bg=image.color.apply(image,this.background),fg=image.color.apply(image,this.foreground);var i,color;for(i=0;i<15;i++){color=parseInt(this.hash.charAt(i),16)%2?bg:fg;if(i<5){this.rectangle(2*cell+margin,i*cell+margin,cell,cell,color,image)}else if(i<10){this.rectangle(1*cell+margin,(i-5)*cell+margin,cell,cell,color,image);this.rectangle(3*cell+margin,(i-5)*cell+margin,cell,cell,color,image)}else if(i<15){this.rectangle(0*cell+margin,(i-10)*cell+margin,cell,cell,color,image);this.rectangle(4*cell+margin,(i-10)*cell+margin,cell,cell,color,image)}}return image},rectangle:function(x,y,w,h,color,image){if(this.isSvg()){image.rectangles.push({x:x,y:y,w:w,h:h,color:color})}else{var i,j;for(i=x;i<x+w;i++){for(j=y;j<y+h;j++){image.buffer[image.index(i,j)]=color}}}},hsl2rgb:function(h,s,b){h*=6;s=[b+=s*=b<.5?b:1-b,b-h%1*s*2,b-=s*=2,b,b+h%1*s,b+s];return[s[~~h%6]*255,s[(h|16)%6]*255,s[(h|8)%6]*255]},toString:function(raw){if(raw){return this.render().getDump()}else{return this.render().getBase64()}},isSvg:function(){return this.format.match(/svg/i)}};var Svg=function(size,foreground,background){this.size=size;this.foreground=this.color.apply(this,foreground);this.background=this.color.apply(this,background);this.rectangles=[]};Svg.prototype={size:null,foreground:null,background:null,rectangles:null,color:function(r,g,b,a){var values=[r,g,b].map(Math.round);values.push(a>=0&&a<=255?a/255:1);return"rgba("+values.join(",")+")"},getDump:function(){var i,xml,rect,fg=this.foreground,bg=this.background,stroke=this.size*.005;xml="<svg xmlns='http://www.w3.org/2000/svg'"+" width='"+this.size+"' height='"+this.size+"'"+" style='background-color:"+bg+";'>"+"<g style='fill:"+fg+"; stroke:"+fg+"; stroke-width:"+stroke+";'>";for(i=0;i<this.rectangles.length;i++){rect=this.rectangles[i];if(rect.color==bg)continue;xml+="<rect "+" x='"+rect.x+"'"+" y='"+rect.y+"'"+" width='"+rect.w+"'"+" height='"+rect.h+"'"+"/>"}xml+="</g></svg>";return xml},getBase64:function(){if("function"===typeof btoa){return btoa(this.getDump())}else if(Buffer){return new Buffer(this.getDump(),"binary").toString("base64")}else{throw"Cannot generate base64 output"}}};if(typeof module!=="undefined"&&typeof module.exports!=="undefined"){module.exports=Identicon}else{window.Identicon=Identicon}})()}).call(this,require("buffer").Buffer)},{"./pnglib":7,buffer:5}],7:[function(require,module,exports){(function(){function write(buffer,offs){for(var i=2;i<arguments.length;i++){for(var j=0;j<arguments[i].length;j++){buffer[offs++]=arguments[i].charAt(j)}}}function byte2(w){return String.fromCharCode(w>>8&255,w&255)}function byte4(w){return String.fromCharCode(w>>24&255,w>>16&255,w>>8&255,w&255)}function byte2lsb(w){return String.fromCharCode(w&255,w>>8&255)}var PNGlib=function(width,height,depth){this.width=width;this.height=height;this.depth=depth;this.pix_size=height*(width+1);this.data_size=2+this.pix_size+5*Math.floor((65534+this.pix_size)/65535)+4;this.ihdr_offs=0;this.ihdr_size=4+4+13+4;this.plte_offs=this.ihdr_offs+this.ihdr_size;this.plte_size=4+4+3*depth+4;this.trns_offs=this.plte_offs+this.plte_size;this.trns_size=4+4+depth+4;this.idat_offs=this.trns_offs+this.trns_size;this.idat_size=4+4+this.data_size+4;this.iend_offs=this.idat_offs+this.idat_size;this.iend_size=4+4+4;this.buffer_size=this.iend_offs+this.iend_size;this.buffer=new Array;this.palette=new Object;this.pindex=0;var _crc32=new Array;for(var i=0;i<this.buffer_size;i++){this.buffer[i]="\0"}write(this.buffer,this.ihdr_offs,byte4(this.ihdr_size-12),"IHDR",byte4(width),byte4(height),"\b");write(this.buffer,this.plte_offs,byte4(this.plte_size-12),"PLTE");write(this.buffer,this.trns_offs,byte4(this.trns_size-12),"tRNS");write(this.buffer,this.idat_offs,byte4(this.idat_size-12),"IDAT");write(this.buffer,this.iend_offs,byte4(this.iend_size-12),"IEND");var header=8+(7<<4)<<8|3<<6;header+=31-header%31;write(this.buffer,this.idat_offs+8,byte2(header));for(var i=0;(i<<16)-1<this.pix_size;i++){var size,bits;if(i+65535<this.pix_size){size=65535;bits="\0"}else{size=this.pix_size-(i<<16)-i;bits=""}write(this.buffer,this.idat_offs+8+2+(i<<16)+(i<<2),bits,byte2lsb(size),byte2lsb(~size))}for(var i=0;i<256;i++){var c=i;for(var j=0;j<8;j++){if(c&1){c=-306674912^c>>1&2147483647}else{c=c>>1&2147483647}}_crc32[i]=c}this.index=function(x,y){var i=y*(this.width+1)+x+1;var j=this.idat_offs+8+2+5*Math.floor(i/65535+1)+i;return j};this.color=function(red,green,blue,alpha){alpha=alpha>=0?alpha:255;var color=((alpha<<8|red)<<8|green)<<8|blue;if(typeof this.palette[color]=="undefined"){if(this.pindex==this.depth)return"\0";var ndx=this.plte_offs+8+3*this.pindex;this.buffer[ndx+0]=String.fromCharCode(red);this.buffer[ndx+1]=String.fromCharCode(green);this.buffer[ndx+2]=String.fromCharCode(blue);this.buffer[this.trns_offs+8+this.pindex]=String.fromCharCode(alpha);this.palette[color]=String.fromCharCode(this.pindex++)}return this.palette[color]};this.getBase64=function(){var s=this.getDump();var ch="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var c1,c2,c3,e1,e2,e3,e4;var l=s.length;var i=0;var r="";do{c1=s.charCodeAt(i);e1=c1>>2;c2=s.charCodeAt(i+1);e2=(c1&3)<<4|c2>>4;c3=s.charCodeAt(i+2);if(l<i+2){e3=64}else{e3=(c2&15)<<2|c3>>6}if(l<i+3){e4=64}else{e4=c3&63}r+=ch.charAt(e1)+ch.charAt(e2)+ch.charAt(e3)+ch.charAt(e4)}while((i+=3)<l);return r};this.getDump=function(){var BASE=65521;var NMAX=5552;var s1=1;var s2=0;var n=NMAX;for(var y=0;y<this.height;y++){for(var x=-1;x<this.width;x++){s1+=this.buffer[this.index(x,y)].charCodeAt(0);s2+=s1;if((n-=1)==0){s1%=BASE;s2%=BASE;n=NMAX}}}s1%=BASE;s2%=BASE;write(this.buffer,this.idat_offs+this.idat_size-8,byte4(s2<<16|s1));function crc32(png,offs,size){var crc=-1;for(var i=4;i<size-4;i+=1){crc=_crc32[(crc^png[offs+i].charCodeAt(0))&255]^crc>>8&16777215}write(png,offs+size-4,byte4(crc^-1))}crc32(this.buffer,this.ihdr_offs,this.ihdr_size);crc32(this.buffer,this.plte_offs,this.plte_size);crc32(this.buffer,this.trns_offs,this.trns_size);crc32(this.buffer,this.idat_offs,this.idat_size);crc32(this.buffer,this.iend_offs,this.iend_size);return"Â‰PNG\r\n\n"+this.buffer.join("")}};if(typeof module!=="undefined"&&typeof module.exports!=="undefined"){module.exports=PNGlib}else{window.PNGlib=PNGlib}})()},{}],8:[function(require,module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){cachedSetTimeout=setTimeout}else{cachedSetTimeout=defaultSetTimout}}catch(e){cachedSetTimeout=defaultSetTimout}try{if(typeof clearTimeout==="function"){cachedClearTimeout=clearTimeout}else{cachedClearTimeout=defaultClearTimeout}}catch(e){cachedClearTimeout=defaultClearTimeout}})();function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0)}if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0)}try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker)}if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker)}try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;runClearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.prependListener=noop;process.prependOnceListener=noop;process.listeners=function(name){return[]};process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}],9:[function(require,module,exports){(function(setImmediate){function scrypt(password,salt,logN,r,dkLen,interruptStep,callback,encoding){"use strict";function SHA256(m){var K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];var h0=1779033703,h1=3144134277,h2=1013904242,h3=2773480762,h4=1359893119,h5=2600822924,h6=528734635,h7=1541459225,w=new Array(64);function blocks(p){var off=0,len=p.length;while(len>=64){var a=h0,b=h1,c=h2,d=h3,e=h4,f=h5,g=h6,h=h7,u,i,j,t1,t2;for(i=0;i<16;i++){j=off+i*4;w[i]=(p[j]&255)<<24|(p[j+1]&255)<<16|(p[j+2]&255)<<8|p[j+3]&255}for(i=16;i<64;i++){u=w[i-2];t1=(u>>>17|u<<32-17)^(u>>>19|u<<32-19)^u>>>10;u=w[i-15];t2=(u>>>7|u<<32-7)^(u>>>18|u<<32-18)^u>>>3;w[i]=(t1+w[i-7]|0)+(t2+w[i-16]|0)|0}for(i=0;i<64;i++){t1=(((e>>>6|e<<32-6)^(e>>>11|e<<32-11)^(e>>>25|e<<32-25))+(e&f^~e&g)|0)+(h+(K[i]+w[i]|0)|0)|0;t2=((a>>>2|a<<32-2)^(a>>>13|a<<32-13)^(a>>>22|a<<32-22))+(a&b^a&c^b&c)|0;h=g;g=f;f=e;e=d+t1|0;d=c;c=b;b=a;a=t1+t2|0}h0=h0+a|0;h1=h1+b|0;h2=h2+c|0;h3=h3+d|0;h4=h4+e|0;h5=h5+f|0;h6=h6+g|0;h7=h7+h|0;off+=64;len-=64}}blocks(m);var i,bytesLeft=m.length%64,bitLenHi=m.length/536870912|0,bitLenLo=m.length<<3,numZeros=bytesLeft<56?56:120,p=m.slice(m.length-bytesLeft,m.length);p.push(128);for(i=bytesLeft+1;i<numZeros;i++)p.push(0);p.push(bitLenHi>>>24&255);p.push(bitLenHi>>>16&255);p.push(bitLenHi>>>8&255);p.push(bitLenHi>>>0&255);p.push(bitLenLo>>>24&255);p.push(bitLenLo>>>16&255);p.push(bitLenLo>>>8&255);p.push(bitLenLo>>>0&255);blocks(p);return[h0>>>24&255,h0>>>16&255,h0>>>8&255,h0>>>0&255,h1>>>24&255,h1>>>16&255,h1>>>8&255,h1>>>0&255,h2>>>24&255,h2>>>16&255,h2>>>8&255,h2>>>0&255,h3>>>24&255,h3>>>16&255,h3>>>8&255,h3>>>0&255,h4>>>24&255,h4>>>16&255,h4>>>8&255,h4>>>0&255,h5>>>24&255,h5>>>16&255,h5>>>8&255,h5>>>0&255,h6>>>24&255,h6>>>16&255,h6>>>8&255,h6>>>0&255,h7>>>24&255,h7>>>16&255,h7>>>8&255,h7>>>0&255]}function PBKDF2_HMAC_SHA256_OneIter(password,salt,dkLen){if(password.length>64){password=SHA256(password.push?password:Array.prototype.slice.call(password,0))}var i,innerLen=64+salt.length+4,inner=new Array(innerLen),outerKey=new Array(64),dk=[];for(i=0;i<64;i++)inner[i]=54;for(i=0;i<password.length;i++)inner[i]^=password[i];for(i=0;i<salt.length;i++)inner[64+i]=salt[i];for(i=innerLen-4;i<innerLen;i++)inner[i]=0;for(i=0;i<64;i++)outerKey[i]=92;for(i=0;i<password.length;i++)outerKey[i]^=password[i];function incrementCounter(){for(var i=innerLen-1;i>=innerLen-4;i--){inner[i]++;if(inner[i]<=255)return;inner[i]=0}}while(dkLen>=32){incrementCounter();dk=dk.concat(SHA256(outerKey.concat(SHA256(inner))));dkLen-=32}if(dkLen>0){incrementCounter();dk=dk.concat(SHA256(outerKey.concat(SHA256(inner))).slice(0,dkLen))}return dk}function salsaXOR(tmp,B,bin,bout){var j0=tmp[0]^B[bin++],j1=tmp[1]^B[bin++],j2=tmp[2]^B[bin++],j3=tmp[3]^B[bin++],j4=tmp[4]^B[bin++],j5=tmp[5]^B[bin++],j6=tmp[6]^B[bin++],j7=tmp[7]^B[bin++],j8=tmp[8]^B[bin++],j9=tmp[9]^B[bin++],j10=tmp[10]^B[bin++],j11=tmp[11]^B[bin++],j12=tmp[12]^B[bin++],j13=tmp[13]^B[bin++],j14=tmp[14]^B[bin++],j15=tmp[15]^B[bin++],u,i;var x0=j0,x1=j1,x2=j2,x3=j3,x4=j4,x5=j5,x6=j6,x7=j7,x8=j8,x9=j9,x10=j10,x11=j11,x12=j12,x13=j13,x14=j14,x15=j15;for(i=0;i<8;i+=2){u=x0+x12;x4^=u<<7|u>>>32-7;u=x4+x0;x8^=u<<9|u>>>32-9;u=x8+x4;x12^=u<<13|u>>>32-13;u=x12+x8;x0^=u<<18|u>>>32-18;u=x5+x1;x9^=u<<7|u>>>32-7;u=x9+x5;x13^=u<<9|u>>>32-9;u=x13+x9;x1^=u<<13|u>>>32-13;u=x1+x13;x5^=u<<18|u>>>32-18;u=x10+x6;x14^=u<<7|u>>>32-7;u=x14+x10;x2^=u<<9|u>>>32-9;u=x2+x14;x6^=u<<13|u>>>32-13;u=x6+x2;x10^=u<<18|u>>>32-18;u=x15+x11;x3^=u<<7|u>>>32-7;u=x3+x15;x7^=u<<9|u>>>32-9;u=x7+x3;x11^=u<<13|u>>>32-13;u=x11+x7;x15^=u<<18|u>>>32-18;u=x0+x3;x1^=u<<7|u>>>32-7;u=x1+x0;x2^=u<<9|u>>>32-9;u=x2+x1;x3^=u<<13|u>>>32-13;u=x3+x2;x0^=u<<18|u>>>32-18;u=x5+x4;x6^=u<<7|u>>>32-7;u=x6+x5;x7^=u<<9|u>>>32-9;u=x7+x6;x4^=u<<13|u>>>32-13;u=x4+x7;x5^=u<<18|u>>>32-18;u=x10+x9;x11^=u<<7|u>>>32-7;u=x11+x10;x8^=u<<9|u>>>32-9;u=x8+x11;x9^=u<<13|u>>>32-13;u=x9+x8;x10^=u<<18|u>>>32-18;u=x15+x14;x12^=u<<7|u>>>32-7;u=x12+x15;x13^=u<<9|u>>>32-9;u=x13+x12;x14^=u<<13|u>>>32-13;u=x14+x13;x15^=u<<18|u>>>32-18}B[bout++]=tmp[0]=x0+j0|0;B[bout++]=tmp[1]=x1+j1|0;B[bout++]=tmp[2]=x2+j2|0;B[bout++]=tmp[3]=x3+j3|0;B[bout++]=tmp[4]=x4+j4|0;B[bout++]=tmp[5]=x5+j5|0;B[bout++]=tmp[6]=x6+j6|0;B[bout++]=tmp[7]=x7+j7|0;B[bout++]=tmp[8]=x8+j8|0;B[bout++]=tmp[9]=x9+j9|0;B[bout++]=tmp[10]=x10+j10|0;B[bout++]=tmp[11]=x11+j11|0;B[bout++]=tmp[12]=x12+j12|0;B[bout++]=tmp[13]=x13+j13|0;B[bout++]=tmp[14]=x14+j14|0;B[bout++]=tmp[15]=x15+j15|0}function blockCopy(dst,di,src,si,len){while(len--)dst[di++]=src[si++]}function blockXOR(dst,di,src,si,len){while(len--)dst[di++]^=src[si++]}function blockMix(tmp,B,bin,bout,r){blockCopy(tmp,0,B,bin+(2*r-1)*16,16);for(var i=0;i<2*r;i+=2){salsaXOR(tmp,B,bin+i*16,bout+i*8);salsaXOR(tmp,B,bin+i*16+16,bout+i*8+r*16)}}function integerify(B,bi,r){return B[bi+(2*r-1)*16]}function stringToUTF8Bytes(s){var arr=[];for(var i=0;i<s.length;i++){var c=s.charCodeAt(i);if(c<128){arr.push(c)}else if(c<2048){arr.push(192|c>>6);arr.push(128|c&63)}else if(c<55296){arr.push(224|c>>12);arr.push(128|c>>6&63);arr.push(128|c&63)}else{if(i>=s.length-1){throw new Error("invalid string")}i++;c=(c&1023)<<10;c|=s.charCodeAt(i)&1023;c+=65536;arr.push(240|c>>18);arr.push(128|c>>12&63);arr.push(128|c>>6&63);arr.push(128|c&63)}}return arr}function bytesToHex(p){var enc="0123456789abcdef".split("");var len=p.length,arr=[],i=0;for(;i<len;i++){arr.push(enc[p[i]>>>4&15]);arr.push(enc[p[i]>>>0&15])}return arr.join("")}function bytesToBase64(p){var enc=("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"+"0123456789+/").split("");var len=p.length,arr=[],i=0,a,b,c,t;while(i<len){a=i<len?p[i++]:0;b=i<len?p[i++]:0;c=i<len?p[i++]:0;t=(a<<16)+(b<<8)+c;arr.push(enc[t>>>3*6&63]);arr.push(enc[t>>>2*6&63]);arr.push(enc[t>>>1*6&63]);arr.push(enc[t>>>0*6&63])}if(len%3>0){arr[arr.length-1]="=";if(len%3===1)arr[arr.length-2]="="}return arr.join("")}var MAX_UINT=-1>>>0,p=1;if(typeof logN==="object"){if(arguments.length>4){throw new Error("scrypt: incorrect number of arguments")}var opts=logN;callback=r;logN=opts.logN;if(typeof logN==="undefined"){if(typeof opts.N!=="undefined"){if(opts.N<2||opts.N>MAX_UINT)throw new Error("scrypt: N is out of range");if((opts.N&opts.N-1)!==0)throw new Error("scrypt: N is not a power of 2");logN=Math.log(opts.N)/Math.LN2}else{throw new Error("scrypt: missing N parameter")}}p=opts.p||1;r=opts.r;dkLen=opts.dkLen||32;interruptStep=opts.interruptStep||0;encoding=opts.encoding}if(p<1)throw new Error("scrypt: invalid p");if(r<=0)throw new Error("scrypt: invalid r");if(logN<1||logN>31)throw new Error("scrypt: logN must be between 1 and 31");var N=1<<logN>>>0,XY,V,B,tmp;if(r*p>=1<<30||r>MAX_UINT/128/p||r>MAX_UINT/256||N>MAX_UINT/128/r)throw new Error("scrypt: parameters are too large");if(typeof password==="string")password=stringToUTF8Bytes(password);if(typeof salt==="string")salt=stringToUTF8Bytes(salt);if(typeof Int32Array!=="undefined"){XY=new Int32Array(64*r);V=new Int32Array(32*N*r);tmp=new Int32Array(16)}else{XY=[];V=[];tmp=new Array(16)}B=PBKDF2_HMAC_SHA256_OneIter(password,salt,p*128*r);var xi=0,yi=32*r;function smixStart(pos){for(var i=0;i<32*r;i++){var j=pos+i*4;XY[xi+i]=(B[j+3]&255)<<24|(B[j+2]&255)<<16|(B[j+1]&255)<<8|(B[j+0]&255)<<0}}function smixStep1(start,end){for(var i=start;i<end;i+=2){blockCopy(V,i*(32*r),XY,xi,32*r);blockMix(tmp,XY,xi,yi,r);blockCopy(V,(i+1)*(32*r),XY,yi,32*r);blockMix(tmp,XY,yi,xi,r)}}function smixStep2(start,end){for(var i=start;i<end;i+=2){var j=integerify(XY,xi,r)&N-1;blockXOR(XY,xi,V,j*(32*r),32*r);blockMix(tmp,XY,xi,yi,r);j=integerify(XY,yi,r)&N-1;blockXOR(XY,yi,V,j*(32*r),32*r);blockMix(tmp,XY,yi,xi,r)}}function smixFinish(pos){for(var i=0;i<32*r;i++){var j=XY[xi+i];B[pos+i*4+0]=j>>>0&255;B[pos+i*4+1]=j>>>8&255;B[pos+i*4+2]=j>>>16&255;B[pos+i*4+3]=j>>>24&255}}var nextTick=typeof setImmediate!=="undefined"?setImmediate:setTimeout;function interruptedFor(start,end,step,fn,donefn){(function performStep(){nextTick(function(){fn(start,start+step<end?start+step:end);start+=step;if(start<end)performStep();else donefn()})})()}function getResult(enc){var result=PBKDF2_HMAC_SHA256_OneIter(password,B,dkLen);if(enc==="base64")return bytesToBase64(result);else if(enc==="hex")return bytesToHex(result);else if(enc==="binary")return new Uint8Array(result);else return result}function calculateSync(){for(var i=0;i<p;i++){smixStart(i*128*r);smixStep1(0,N);smixStep2(0,N);smixFinish(i*128*r)}callback(getResult(encoding))}function calculateAsync(i){smixStart(i*128*r);interruptedFor(0,N,interruptStep*2,smixStep1,function(){interruptedFor(0,N,interruptStep*2,smixStep2,function(){smixFinish(i*128*r);if(i+1<p){nextTick(function(){calculateAsync(i+1)})}else{callback(getResult(encoding))}})})}if(typeof interruptStep==="function"){encoding=callback;callback=interruptStep;interruptStep=1e3}if(interruptStep<=0){calculateSync()}else{calculateAsync(0)}}if(typeof module!=="undefined")module.exports=scrypt}).call(this,require("timers").setImmediate)},{timers:10}],10:[function(require,module,exports){(function(setImmediate,clearImmediate){var nextTick=require("process/browser.js").nextTick;var apply=Function.prototype.apply;var slice=Array.prototype.slice;var immediateIds={};var nextImmediateId=0;exports.setTimeout=function(){return new Timeout(apply.call(setTimeout,window,arguments),clearTimeout)};exports.setInterval=function(){return new Timeout(apply.call(setInterval,window,arguments),clearInterval)};exports.clearTimeout=exports.clearInterval=function(timeout){timeout.close()};function Timeout(id,clearFn){this._id=id;this._clearFn=clearFn}Timeout.prototype.unref=Timeout.prototype.ref=function(){};Timeout.prototype.close=function(){this._clearFn.call(window,this._id)};exports.enroll=function(item,msecs){clearTimeout(item._idleTimeoutId);item._idleTimeout=msecs};exports.unenroll=function(item){clearTimeout(item._idleTimeoutId);item._idleTimeout=-1};exports._unrefActive=exports.active=function(item){clearTimeout(item._idleTimeoutId);var msecs=item._idleTimeout;if(msecs>=0){item._idleTimeoutId=setTimeout(function onTimeout(){if(item._onTimeout)item._onTimeout()},msecs)}};exports.setImmediate=typeof setImmediate==="function"?setImmediate:function(fn){var id=nextImmediateId++;var args=arguments.length<2?false:slice.call(arguments,1);immediateIds[id]=true;nextTick(function onNextTick(){if(immediateIds[id]){if(args){fn.apply(null,args)}else{fn.call(null)}exports.clearImmediate(id)}});return id};exports.clearImmediate=typeof clearImmediate==="function"?clearImmediate:function(id){delete immediateIds[id]}}).call(this,require("timers").setImmediate,require("timers").clearImmediate)},{"process/browser.js":8,timers:10}],11:[function(require,module,exports){const apricoUi=require("aprico-ui-fix");apricoUi("#aprico")},{"aprico-ui-fix":2}]},{},[11]);
